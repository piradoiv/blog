// Generated by CoffeeScript 1.6.2
(function() {
  $(function() {
    var lookForCodemirror, useEditorOn;

    useEditorOn = function(id) {
      return CodeMirror.fromTextArea(id, {
        theme: 'monokai',
        lineNumbers: true,
        mode: 'application/x-httpd-php'
      });
    };
    lookForCodemirror = function() {
      var cmCounter;

      cmCounter = 0;
      return $('.codemirror').each(function() {
        var identifier;

        $(this).attr('id', "codemirror-" + cmCounter);
        identifier = $(this)[0];
        useEditorOn(identifier);
        return cmCounter++;
      });
    };
    return lookForCodemirror();
  });

  $(function() {
    var updatePreview;

    updatePreview = function() {
      return $.post(previewUrl, $('form').serialize(), function(data) {
        return $('.article-preview').html(data);
      });
    };
    if (typeof articleId !== "undefined" && articleId !== null) {
      updatePreview();
      return $('input, textarea').on('keyup', function() {
        return updatePreview();
      });
    }
  });

}).call(this);
